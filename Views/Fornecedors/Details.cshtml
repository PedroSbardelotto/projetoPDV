@model PDV.Models.Fornecedor

@{
    ViewData["Title"] = "Detalhes do Fornecedor";

    // Lógica visual
    var initial = !string.IsNullOrEmpty(Model.NomeFantasia) ? Model.NomeFantasia.Substring(0, 1).ToUpper() : "?";
    var statusClass = Model.Status == true ? "bg-success text-success" : "bg-danger text-danger";
    var statusIcon = Model.Status == true ? "bi-check-circle-fill" : "bi-dash-circle-fill";
    var statusText = Model.Status == true ? "Ativo" : "Inativo";
}

<div class="container-fluid py-4">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-9">

            <!-- 1. CARD DE PERFIL -->
            <div class="card border-0 shadow-sm rounded-4 mb-4 overflow-hidden">
                <div class="card-body p-0">
                    <div class="row g-0">
                        <!-- Coluna Visual (Esquerda) -->
                        <div class="col-md-4 bg-light d-flex flex-column align-items-center justify-content-center p-4 border-end border-light">
                            <div class="rounded-circle bg-white shadow-sm text-primary d-flex align-items-center justify-content-center fw-bold mb-3"
                                 style="width: 100px; height: 100px; font-size: 2.5rem;">
                                @initial
                            </div>

                            <h5 class="fw-bold text-dark mb-1 text-center">@Model.NomeFantasia</h5>
                            <p class="text-muted small text-center mb-3">@Model.NomeRazao</p>

                            <div class="d-inline-flex align-items-center px-3 py-1 rounded-pill border @statusClass bg-opacity-10 border-opacity-10">
                                <i class="bi @statusIcon me-2"></i>
                                <span class="fw-bold small">@statusText</span>
                            </div>

                            <div class="mt-4 w-100 px-4">
                                <div class="d-flex justify-content-between small text-muted border-bottom pb-2 mb-2">
                                    <span>ID Sistema:</span>
                                    <span class="fw-bold">#@Model.Id</span>
                                </div>
                                <div class="d-flex justify-content-between small text-muted">
                                    <span>Cadastro:</span>
                                    <span class="fw-bold">@Model.DataEntrada.ToString("dd/MM/yyyy")</span>
                                </div>
                            </div>
                        </div>

                        <!-- Coluna Dados (Direita) -->
                        <div class="col-md-8 p-4">
                            <h6 class="text-uppercase text-muted small fw-bold mb-4 border-bottom pb-2">
                                <i class="bi bi-info-circle me-2"></i>Dados Cadastrais
                            </h6>

                            <div class="row g-4 mb-4">
                                <!-- Documentos -->
                                <div class="col-sm-6">
                                    <label class="small text-muted fw-bold text-uppercase">CNPJ</label>
                                    <div class="d-flex align-items-center mt-1">
                                        <i class="bi bi-card-heading text-secondary me-2"></i>
                                        <span id="cnpj-mask" class="text-dark">@Model.CNPJ</span>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label class="small text-muted fw-bold text-uppercase">Inscrição Estadual</label>
                                    <div class="d-flex align-items-center mt-1">
                                        <i class="bi bi-file-earmark-text text-secondary me-2"></i>
                                        <span>@(string.IsNullOrEmpty(Model.InscricaoEstadual) ? "Isento" : Model.InscricaoEstadual)</span>
                                    </div>
                                </div>

                                <!-- Contato -->
                                <div class="col-sm-6">
                                    <label class="small text-muted fw-bold text-uppercase">E-mail</label>
                                    <div class="d-flex align-items-center mt-1">
                                        <i class="bi bi-envelope text-secondary me-2"></i>
                                        <a href="mailto:@Model.Email" class="text-decoration-none text-dark">
                                            @(string.IsNullOrEmpty(Model.Email) ? "Não informado" : Model.Email)
                                        </a>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <label class="small text-muted fw-bold text-uppercase">Telefone / Contato</label>
                                    <div class="d-flex align-items-center mt-1">
                                        <i class="bi bi-telephone text-success me-2"></i>
                                        <span id="cel-mask" class="fw-bold text-dark">@Model.Contato</span>
                                    </div>
                                </div>

                                <!-- Endereço -->
                                <div class="col-12">
                                    <label class="small text-muted fw-bold text-uppercase">Endereço Completo</label>
                                    <div class="d-flex align-items-start mt-1 p-3 bg-light rounded-3 border border-light">
                                        <i class="bi bi-geo-alt-fill text-danger me-2 mt-1"></i>
                                        <span>@(string.IsNullOrEmpty(Model.Endereco) ? "Endereço não cadastrado" : Model.Endereco)</span>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex justify-content-end gap-2 mt-5">
                                <a asp-action="Index" class="btn btn-light text-secondary fw-bold border">
                                    <i class="bi bi-arrow-left me-1"></i> Voltar
                                </a>
                                <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary fw-bold px-4 shadow-sm">
                                    <i class="bi bi-pencil-square me-2"></i>Editar Dados
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. HISTÓRICO (Placeholder para futura implementação) -->
            <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
                <div class="card-header bg-white py-3 border-bottom">
                    <h6 class="mb-0 fw-bold text-dark"><i class="bi bi-clock-history me-2"></i>Histórico Recente</h6>
                </div>
                <div class="card-body p-5 text-center bg-light">
                    <div class="mb-3 text-muted opacity-25">
                        <i class="bi bi-cart-x" style="font-size: 3rem;"></i>
                    </div>
                    <h6 class="text-muted fw-bold">Nenhuma movimentação encontrada</h6>
                    <p class="text-muted small mb-0">Futuramente, as compras realizadas com este fornecedor aparecerão aqui.</p>
                </div>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#cnpj-mask').mask('00.000.000/0000-00', {reverse: true});
            $('#cel-mask').mask('(00) 00000-0000');
        });
    </script>
}