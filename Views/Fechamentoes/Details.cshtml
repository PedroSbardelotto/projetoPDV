@model PDV.Models.Fechamento
@using System.Globalization

@{
    ViewData["Title"] = "Detalhes do Fechamento";
    var culture = new CultureInfo("pt-BR");
}

<div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">

        <div class="card shadow-sm">
            <div class="card-header">
                <h4 class="mb-0">@ViewData["Title"]</h4>
            </div>

            <div class="card-body">
                <dl class="row">

                    <dt class="col-sm-3">@Html.DisplayNameFor(model => model.DataAbertura)</dt>
                    <dd class="col-sm-9">@Model.DataAbertura.ToString("f", culture)</dd>

                    <dt class="col-sm-3">@Html.DisplayNameFor(model => model.ValorAbertura)</dt>
                    <dd class="col-sm-9">@Model.ValorAbertura.ToString("C", culture)</dd>

                    <hr class="my-3">

                    <dt class="col-sm-3">@Html.DisplayNameFor(model => model.DataFechamento)</dt>
                    <dd class="col-sm-9">
                        @if (Model.DataFechamento.HasValue)
                        {
                            <span>@Model.DataFechamento.Value.ToString("f", culture)</span>
                        }
                        else
                        {
                            <span class="badge bg-success">CAIXA ABERTO</span>
                        }
                    </dd>

                    @if (Model.DataFechamento.HasValue)
                    {
                        <dt class="col-sm-3">Valor Fechamento</dt>
                        <dd class="col-sm-9">
                            <span>@Model.ValorFechamento.ToString("C", culture)</span>
                        </dd>
                    }

                    @if (Model.DataFechamento.HasValue)
                    {
                        var diferenca = Model.ValorFechamento - Model.ValorAbertura;
                        var cor = diferenca > 0 ? "text-success" : (diferenca < 0 ? "text-danger" : "text-muted");
                        <dt class="col-sm-3">Diferença</dt>
                        <dd class="col-sm-9">

                            <span class="fw-bold @cor">
                                @diferenca.ToString("C", culture)
                                @(diferenca > 0 ? "(Sobra)" : (diferenca < 0 ? "(Quebra)" : ""))
                            </span>
                        </dd>
                    }

                </dl>
            </div>

            <div class="card-footer d-flex justify-content-end gap-2">
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-arrow-left me-2"></i>Voltar à Lista
                </a>
            </div>
        </div>
    </div>
</div>